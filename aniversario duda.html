<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feliz aniversario, minha princesinha ❤️</title>
    <script src="https://cdn.tailwindcss.com"></script>


    <style>
        @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Poppins:wght@300;400;600&display=swap');
        
        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: #fff5f5;
            color: #333;
            overflow-x: hidden;
            cursor: url('cursor/hel.cur'), auto !important;
        }
        
        .hidden { 
            display: none; 
        }
        
        .fade-in { 
            animation: fadeIn 1s ease-in forwards; 
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .dancing-font {
            font-family: 'Dancing Script', cursive;
        }
        
        .heart {
            position: absolute;
            pointer-events: none;
            animation: float 4s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(10deg); }
        }
        
        .photo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            padding: 20px;
        }
        
        .photo-item {
            position: relative;
            overflow: hidden;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            aspect-ratio: 1/1;
        }
        
        .photo-item:hover {
            transform: scale(1.03);
            box-shadow: 0 8px 16px rgba(0,0,0,0.2);
        }
        
        .photo-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }
        
        .photo-item:hover img {
            transform: scale(1.1);
        }
        
        .love-note {
            background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
            border-radius: 15px;
            padding: 20px;
            margin: 15px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            max-width: 300px;
        }
        
        .love-note:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0,0,0,0.2);
        }
        
        .countdown-number {
            font-size: 2rem;
            font-weight: bold;
            color: #ff6b6b;
            margin: 0 10px;
        }
        
        .music-player {
            background: white;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            max-width: 400px;
            margin: 0 auto;
        }
        
        .progress-bar {
            height: 5px;
            background-color: #e0e0e0;
            border-radius: 5px;
            margin-top: 10px;
        }
        
        .progress {
            height: 100%;
            background-color: #ff6b6b;
            border-radius: 5px;
            width: 0%;
        }
        
        #confetti-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 20px;
            max-width: 80%;
            max-height: 80%;
            overflow: auto;
            text-align: center;
            position: relative;
        }
        
        .close-modal {
            position: absolute;
            top: 10px;
            right: 20px;
            font-size: 2rem;
            cursor: pointer;
        }

        .modal-caption {
            color: #ccc;
            margin-top: 15px;
            font-size: 1.2rem;
        }
    </style>
</head>
<body>
    <canvas id="confetti-canvas"></canvas>
    
    <!-- Hearts background animation -->
    <div id="hearts-container"></div>
    
    <!-- Countdown Section - Always visible -->
    <section id="countdown-section" class="min-h-screen flex items-center justify-center bg-gradient-to-r from-pink-100 to-purple-100">
        <div class="text-center">
            <h1 class="text-5xl md:text-7xl font-bold dancing-font text-pink-600 mb-8">Faltam apenas...</h1>
            <div class="flex justify-center items-center space-x-4 mb-8">
                <div class="text-center mx-2">
                    <div id="days" class="text-6xl md:text-8xl font-bold text-pink-600">00</div>
                    <div class="text-xl text-gray-600">Dias</div>
                </div>
                <div class="text-4xl md:text-6xl text-pink-500">:</div>
                <div class="text-center mx-2">
                    <div id="hours" class="text-6xl md:text-8xl font-bold text-pink-600">00</div>
                    <div class="text-xl text-gray-600">Horas</div>
                </div>
                <div class="text-4xl md:text-6xl text-pink-500">:</div>
                <div class="text-center mx-2">
                    <div id="minutes" class="text-6xl md:text-8xl font-bold text-pink-600">00</div>
                    <div class="text-xl text-gray-600">Minutos</div>
                </div>
                <div class="text-4xl md:text-6xl text-pink-500">:</div>
                <div class="text-center mx-2">
                    <div id="seconds" class="text-6xl md:text-8xl font-bold text-pink-600">00</div>
                    <div class="text-xl text-gray-600">Segundos</div>
                </div>
            </div>
            <p class="text-xl md:text-2xl text-gray-700">Para o seu dia especial! ❤️</p>
        </div>
    </section>
    
    <!-- Main Content (initially hidden) -->
    <div id="site-content" class="hidden">
    <!-- Header Section -->
    <header class="text-center py-20 relative overflow-hidden">
        <h1 class="text-5xl md:text-7xl font-bold dancing-font text-pink-600 mb-4">Feliz aniversario, minha princesinha</h1>
        <p class="text-xl md:text-2xl mb-8">Para a garota mais especial do mundo ❤️</p>
        <button id="surprise-btn" class="bg-pink-500 hover:bg-pink-600 text-white font-bold py-3 px-6 rounded-full text-lg transition-all duration-300 transform hover:scale-105">
            Clique para uma surpresa!
        </button>
    </header>
    
    <!-- Countdown Section -->
    <section class="py-12 bg-gradient-to-r from-pink-100 to-purple-100">
        <div class="container mx-auto text-center">
            <h2 class="text-3xl font-bold mb-6 dancing-font text-pink-600">Contagem regressiva para seu dia especial</h2>
            <div class="flex justify-center items-center">
                <div class="countdown-item">
                    <div class="countdown-number" id="days">00</div>
                    <div class="text-gray-600">Dias</div>
                </div>
                <div class="countdown-item">
                    <div class="countdown-number" id="hours">00</div>
                    <div class="text-gray-600">Horas</div>
                </div>
                <div class="countdown-item">
                    <div class="countdown-number" id="minutes">00</div>
                    <div class="text-gray-600">Minutos</div>
                </div>
                <div class="countdown-item">
                    <div class="countdown-number" id="seconds">00</div>
                    <div class="text-gray-600">Segundos</div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Love Notes Section -->
    <section class="py-16 px-4">
        <h2 class="text-4xl font-bold text-center mb-12 dancing-font text-pink-600">Motivos por que eu te amo</h2>
        <div class="flex flex-wrap justify-center" id="love-notes-container">
            <!-- Love notes will be added here by JavaScript -->
        </div>
    </section>
    
    <!-- Photo Gallery Section -->
    <section class="py-16 bg-pink-50">
        <div class="container mx-auto px-4">
            <h2 class="text-4xl font-bold text-center mb-12 dancing-font text-pink-600">Nossas memórias juntos</h2>
            <p class="text-lg text-center mb-8">Clica em cada uma bobona</p>
            <div class="photo-grid" id="photo-gallery">
                <!-- Photo items will be added here by JavaScript -->
            </div>
        </div>
    </section>

    <!-- Music Player Section -->
    <section class="py-16">
        <div class="container mx-auto px-4">
            <h2 class="text-4xl font-bold text-center mb-8 dancing-font text-pink-600">Nossa Música</h2>
            <div class="bg-white rounded-lg shadow-lg p-6 mb-8 max-w-2xl mx-auto">
                <audio id="audio-player" class="hidden"></audio>
                <h3 id="song-title" class="text-2xl font-bold text-pink-600 mb-4">Nossa música</h3>
                
                <div class="w-full bg-gray-200 rounded-full h-1.5 mb-4">
                    <div id="progress-bar" class="bg-pink-500 h-1.5 rounded-full" style="width: 0%"></div>
                </div>
                <div class="flex justify-between text-sm text-gray-500 mb-4">
                    <span id="current-time">0:00</span>
                    <span id="duration">0:00</span>
                </div>

                <div class="flex justify-center items-center space-x-6 mb-6">
                    <button id="prev-btn" class="p-2 rounded-full bg-pink-100 hover:bg-pink-200 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12.066 11.2a1 1 0 000 1.6l5.334 4A1 1 0 0019 16V8a1 1 0 00-1.6-.8l-5.333 4zM4.066 11.2a1 1 0 000 1.6l5.334 4A1 1 0 0011 16V8a1 1 0 00-1.6-.8l-5.334 4z" />
                        </svg>
                    </button>
                    <button id="play-btn" class="p-3 rounded-full bg-pink-500 text-white hover:bg-pink-600 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                    </button>
                    <button id="next-btn" class="p-2 rounded-full bg-pink-100 hover:bg-pink-200 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.933 12.8a1 1 0 000-1.6l-5.333-4A1 1 0 005 8v8a1 1 0 001.6.8l5.333-4zM19.933 12.8a1 1 0 000-1.6l-5.333-4A1 1 0 0013 8v8a1 1 0 001.6.8l5.333-4z" />
                        </svg>
                    </button>
                    <div id="volume-container" class="flex items-center space-x-2">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-pink-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"></path>
                        </svg>
                        <input type="range" id="volume-slider" min="0" max="1" step="0.01" value="0.8" class="w-24 h-2 bg-pink-100 rounded-lg appearance-none cursor-pointer">
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Modal for Surprise -->
    <div class="modal" id="surprise-modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2 class="text-3xl font-bold mb-6 dancing-font text-pink-600">Feliz Aniversário, minha princesinha!</h2>
            <p class="text-xl mb-8">Eu te amo mais do que palavras podem expressar ❤️</p>
            <img src="images/1k.png" alt="1k.png" class="mb-6 rounded-lg">
            <div class="flex justify-center space-x-4">
                <button id="confetti-btn" class="bg-pink-500 hover:bg-pink-600 text-white font-bold py-2 px-6 rounded-full">
                    Mais confetes!
                </button>
                <button id="stop-confetti-btn" class="bg-gray-400 hover:bg-gray-500 text-white font-bold py-2 px-6 rounded-full">
                    Parar confetes
                </button>
            </div>
        </div>
    </div> <!-- End of site-content -->
    
    <footer class="py-8 bg-pink-900 text-white text-center">
        <p class="text-lg">Feito de coração, para uma princesinha</p>
        <p class="text-sm mt-2">Para sempre seu</p>
    </footer>
    
    <script>
        // Countdown function
        function startCountdown() {
            // Set the target date to September 1, 2025, 00:00 Brazil time (UTC-3)
            const targetDate = new Date('2025-09-01T00:00:00-03:00');
            
            function updateDisplay() {
                const now = new Date();
                const diff = targetDate - now;
                
                if (diff <= 0) {
                    // Countdown finished - show the content
                    document.getElementById('countdown-section').classList.add('hidden');
                    const content = document.getElementById('site-content');
                    content.classList.remove('hidden');
                    content.classList.add('fade-in');
                    
                    // Start other animations and effects
                    if (typeof createHearts === 'function') createHearts();
                    if (typeof createLoveNotes === 'function') createLoveNotes();
                    if (typeof createPhotoGallery === 'function') createPhotoGallery();
                    if (typeof initMusicPlayer === 'function') initMusicPlayer();
                } else {
                    // Calculate time units
                    const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                    const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                    const seconds = Math.floor((diff % (1000 * 60)) / 1000);
                    
                    // Update the display
                    document.getElementById('days').textContent = days.toString().padStart(2, '0');
                    document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
                    document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
                    document.getElementById('seconds').textContent = seconds.toString().padStart(2, '0');
                    
                    // Continue counting down
                    setTimeout(updateDisplay, 1000);
                }
            }
            
            // Start the countdown
            updateDisplay();
        }
        
        // Start the countdown when the page loads
        document.addEventListener('DOMContentLoaded', startCountdown);
        
        // Generate floating hearts
        function createHearts() {
            const container = document.getElementById('hearts-container');
            const colors = ['#ff6b6b', '#ff8e8e', '#ffb3b3', '#ffd8d8'];
            
            for (let i = 0; i < 30; i++) {
                const heart = document.createElement('div');
                heart.innerHTML = '❤️';
                heart.className = 'heart';
                heart.style.left = Math.random() * 100 + 'vw';
                heart.style.top = Math.random() * 100 + 'vh';
                heart.style.fontSize = (Math.random() * 20 + 10) + 'px';
                heart.style.opacity = Math.random() * 0.5 + 0.3;
                heart.style.animationDuration = (Math.random() * 3 + 2) + 's';
                heart.style.animationDelay = Math.random() * 5 + 's';
                heart.style.color = colors[Math.floor(Math.random() * colors.length)];
                container.appendChild(heart);
            }
        }
        
        // Countdown to birthday
        function updateCountdown() {
            // Set the birthday date to September 1, 2025, 00:00 Brazil time (UTC-3)
            const birthdayDate = new Date('2025-09-01T00:00:00-03:00');
            
            const now = new Date();
            const diff = birthdayDate - now;
            
            if (diff <= 0) {
                // Birthday has arrived
                document.getElementById('days').textContent = '00';
                document.getElementById('hours').textContent = '00';
                document.getElementById('minutes').textContent = '00';
                document.getElementById('seconds').textContent = '00';
                return;
            }
            
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diff % (1000 * 60)) / 1000);
            
            document.getElementById('days').textContent = days.toString().padStart(2, '0');
            document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
            document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
            document.getElementById('seconds').textContent = seconds.toString().padStart(2, '0');
            
            setTimeout(updateCountdown, 1000);
        }
        
        // Love notes
        const loveNotes = [
        "Seu rosto lindo",
                "Seu lindo sorriso",
                "A forma em que você me faz feliz",
                "A forma em que você me olha",
                "Seu estilo",
                "Seu jeito de ser",
                "O jeito que você me trata",
                "A nossa conexão",
                "A nossa química",
                "Por só você conseguir me entender",
                "Por sempre estar lá por mim",
                "Por sempre me amar",
                "Por sempre estar comigo",
                "Suas curvas",
                "Por me conhecer tão bem",
                "Seu abraço",
                "A sensação de paz quando estou ao seu lado",
                "Sua pouca paciência",
                "Por me fazer sentir especial",
                "Por me fazer sentir amado",
                "Seu toque",
                "O jeito que você se preocupa com cada detalhe",
                "E muito mais, só nao sei expressar com palavras"
        ];
        
        function createLoveNotes() {
            const container = document.getElementById('love-notes-container');
            
            loveNotes.forEach(note => {
                const noteElement = document.createElement('div');
                noteElement.className = 'love-note';
                noteElement.textContent = note;
                
                // Add click animation
                noteElement.addEventListener('click', function() {
                    this.style.transform = 'scale(1.1) rotate(5deg)';
                    setTimeout(() => {
                        this.style.transform = '';
                    }, 300);
                });
                
                container.appendChild(noteElement);
            });
        }
        
        // Photo gallery
        function createPhotoGallery() {
            const gallery = document.getElementById('photo-gallery');
            
            // Array of your image filenames (add your own filenames here)
            const imageFiles = [
                'primeira foto.jpg', 'garagem.jpg', 'oculos garagem.jpg', 'acai.jpg',
                'acai preferida.jpg', 'felicidade acai.jpg', 'hm.jpg', 'biceps .jpg',
                'primeira vez escada.jpg', 'primeiro beijo.jpg', 'arte.jpg'
            ];
            
            // Photo descriptions in Portuguese (update these to match your images)
            const photoDescriptions = [
                "Nossa primeira foto",
                "Nós na garagem do golden",
                "Eu usando seu oculos",
                "Nós no acai",
                "Minha foto preferida",
                "A gente muito feliz",
                "Rs",
                "Você y meu biceps",
                "Nossa primeira vez na escadinha",
                "Dia do nosso primeiro beijo",
                "Sua arte"
            ];
            
            // Create photo items
            for (let i = 0; i < imageFiles.length; i++) {
                const item = document.createElement('div');
                item.className = 'photo-item';
                
                const img = document.createElement('img');
                // Point to your images in the 'images' folder
                img.src = `images/${imageFiles[i]}`;
                img.alt = photoDescriptions[i % photoDescriptions.length];
                img.loading = 'lazy';
                
                img.addEventListener('click', function() {
                    showFullImage(this.src, this.alt);
                });
                
                item.appendChild(img);
                gallery.appendChild(item);
            }
        }
        
        function getRandomSize() {
            const sizes = ['500x500', '600x400', '400x600', '700x500', '500x700'];
            return sizes[Math.floor(Math.random() * sizes.length)];
        }
        
        // HTML5 Audio Player
        const audioPlayer = document.getElementById('audio-player');
        const playBtn = document.getElementById('play-btn');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const volumeSlider = document.getElementById('volume-slider');
        const songTitle = document.getElementById('song-title');
        const progressBar = document.getElementById('progress-bar');
        const currentTimeEl = document.getElementById('current-time');
        const durationEl = document.getElementById('duration');

        let currentSongIndex = 0;
        let isPlaying = false;

        const songs = [
            { title: 'Nossa música (sim eu lembrei)', src: 'music/Nossa musica.mp3' }
            // Add more songs here if you want
        ];

        function loadSong(index) {
            const song = songs[index];
            songTitle.textContent = song.title;
            audioPlayer.src = song.src;
            currentSongIndex = index;
        }

        function playSong() {
            isPlaying = true;
            audioPlayer.play();
            updatePlayButton();
        }

        function pauseSong() {
            isPlaying = false;
            audioPlayer.pause();
            updatePlayButton();
        }

        function togglePlay() {
            if (isPlaying) {
                pauseSong();
            } else {
                playSong();
            }
        }

        function playNextSong() {
            currentSongIndex = (currentSongIndex + 1) % songs.length;
            loadSong(currentSongIndex);
            playSong();
        }

        function playPreviousSong() {
            currentSongIndex = (currentSongIndex - 1 + songs.length) % songs.length;
            loadSong(currentSongIndex);
            playSong();
        }

        function updatePlayButton() {
            if (isPlaying) {
                playBtn.innerHTML = `
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                `;
            } else {
                playBtn.innerHTML = `
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" />
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                `;
            }
        }

        function updateProgress(e) {
            const { duration, currentTime } = e.srcElement;
            const progressPercent = (currentTime / duration) * 100;
            progressBar.style.width = `${progressPercent}%`;

            // Update time display
            durationEl.textContent = formatTime(duration);
            currentTimeEl.textContent = formatTime(currentTime);
        }

        function setProgress(e) {
            const width = this.clientWidth;
            const clickX = e.offsetX;
            const duration = audioPlayer.duration;
            audioPlayer.currentTime = (clickX / width) * duration;
        }

        // Event Listeners
        playBtn.addEventListener('click', togglePlay);
        prevBtn.addEventListener('click', playPreviousSong);
        nextBtn.addEventListener('click', playNextSong);
        volumeSlider.addEventListener('input', (e) => {
            audioPlayer.volume = e.target.value;
        });
        audioPlayer.addEventListener('timeupdate', updateProgress);
        audioPlayer.addEventListener('ended', playNextSong);
        document.querySelector('.w-full.bg-gray-200.rounded-full').addEventListener('click', setProgress);

        // Initial Load
        loadSong(0);
        audioPlayer.volume = volumeSlider.value;

        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins}:${secs < 10 ? '0' : ''}${secs}`;
        }
        
        // Confetti effect
        function setupConfetti() {
            const canvas = document.getElementById('confetti-canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            let confettiPieces = [];
            let animationFrameId;
            const colors = ['#ff6b6b', '#ff8e8e', '#ffb3b3', '#ffd8d8', '#ffecf4'];

            class ConfettiPiece {
                constructor() {
                    this.x = Math.random() * canvas.width;
                    this.y = Math.random() * canvas.height - canvas.height;
                    this.size = Math.random() * 10 + 5;
                    this.color = colors[Math.floor(Math.random() * colors.length)];
                    this.speed = Math.random() * 3 + 2;
                    this.angle = Math.random() * 6.28;
                    this.spin = Math.random() * 0.2 - 0.1;
                }

                update() {
                    this.y += this.speed;
                    this.angle += this.spin;
                    if (this.y > canvas.height) {
                        this.y = -this.size;
                        this.x = Math.random() * canvas.width;
                    }
                }

                draw() {
                    ctx.save();
                    ctx.translate(this.x, this.y);
                    ctx.rotate(this.angle);
                    ctx.fillStyle = this.color;
                    ctx.fillRect(-this.size / 2, -this.size / 2, this.size, this.size);
                    ctx.restore();
                }
            }

            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                confettiPieces.forEach(piece => {
                    piece.update();
                    piece.draw();
                });
                animationFrameId = requestAnimationFrame(animate);
            }

            function startConfetti() {
                if (!animationFrameId) {
                    animate();
                }
            }

            function stopConfetti() {
                if (animationFrameId) {
                    cancelAnimationFrame(animationFrameId);
                    animationFrameId = null;
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    confettiPieces = []; // Clear the array
                }
            }

            function addMoreConfetti() {
                for (let i = 0; i < 100; i++) {
                    confettiPieces.push(new ConfettiPiece());
                }
                startConfetti();
            }

            // Initial confetti
            addMoreConfetti();

            // Button event listeners
            document.getElementById('confetti-btn').addEventListener('click', addMoreConfetti);
            document.getElementById('stop-confetti-btn').addEventListener('click', stopConfetti);
        }
        
        // Modal functionality
        function setupModal() {
            const modal = document.getElementById('surprise-modal');
            const btn = document.getElementById('surprise-btn');
            const span = document.querySelector('.close-modal');
            
            btn.addEventListener('click', () => {
                modal.style.display = 'flex';
            });
            
            span.addEventListener('click', () => {
                modal.style.display = 'none';
            });
            
            window.addEventListener('click', (event) => {
                if (event.target === modal) {
                    modal.style.display = 'none';
                }
            });
        }
        
        // Show full image
        function showFullImage(src, alt) {
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.style.display = 'flex';
            modal.addEventListener('click', () => {
                document.body.removeChild(modal);
            });
            
            const content = document.createElement('div');
            content.className = 'modal-content';
            content.style.maxWidth = '90%';
            content.style.maxHeight = '90%';
            
            const img = document.createElement('img');
            img.src = src;
            img.alt = alt;
            img.style.maxWidth = '100%';
            img.style.maxHeight = '80vh';

            const caption = document.createElement('div');
            caption.className = 'modal-caption';
            caption.textContent = alt;
            
            content.appendChild(img);
            content.appendChild(caption);
            modal.appendChild(content);
            document.body.appendChild(modal);
        }
        
        // Initialize everything
        window.addEventListener('DOMContentLoaded', () => {
            createHearts();
            updateCountdown();
            createLoveNotes();
            createPhotoGallery();
            // setupMusicPlayer is no longer needed as we're using YouTube player
            setupConfetti();
            setupModal();
            
            // Resize handler for confetti canvas
            window.addEventListener('resize', () => {
                const canvas = document.getElementById('confetti-canvas');
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            });
        });
    </script>
</body>
</html>
